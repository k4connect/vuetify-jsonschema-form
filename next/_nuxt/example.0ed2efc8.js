import{_ as I,t as p,v,d as N,r as A,o as B,i as D,L as y,A as i,z as o,O as S,P as _,B as g,y as u,x as m,M as h,Q as J,S as L}from"./entry.956ef850.js";import{_ as W}from"./code-block.a7239852.js";import{a as M,c as K,r as P,b as E,i as F,_ as q,V as z,d as c,e as j,f as $,g as T,h as x,j as R,k as H,l as G}from"./vjsf.f8abe9da.js";import{d as Q,f as C,g as O}from"./index.f9215e50.js";import{V as k}from"./VBtn.459fcd6c.js";import{V as X}from"./VContainer.82cc81db.js";const Y={props:{content:{type:String,required:!0}}},Z=["innerHTML"];function ee(e,l,t,n,s,d){return p(),v("div",{class:"markdown-block",innerHTML:e.$markdown(t.content)},null,8,Z)}const ve=I(Y,[["render",ee]]),te=N({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:l,attrs:t}){const n=A(!1);return B(()=>{n.value=!0}),s=>{var V;if(n.value)return(V=l.default)==null?void 0:V.call(l);const d=l.fallback||l.placeholder;if(d)return d();const r=s.fallback||s.placeholder||"",b=s.fallbackTag||s.placeholderTag||"span";return v(b,t,r)}}}),le=E,f=e=>{var l;if(!e.layout){const t={};if(e["x-display"]==="icon"&&(e.enum||(l=e.items)!=null&&l.enum)&&(t.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]&&(t.comp=e["x-display"],delete e["x-display"]),e.format==="hexcolor"&&(t.comp="color-picker",delete e.format),e["x-props"]&&(t.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(t.comp="select",t.getItems={expr:e["x-fromData"]},delete e["x-fromData"]),e["x-fromUrl"]){let n=e["x-fromUrl"];for(const s of n.matchAll(/\{(.*?)\}/g))s[1]!=="q"&&(n=n.replace(s[0],"$"+s[0]));t.getItems={url:n},delete e["x-fromUrl"]}t.getItems&&F(t.getItems)&&(e["x-itemKey"]&&(t.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(t.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(t.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(t.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(t.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),Object.keys(t).length===1&&"comp"in t?e.layout=t.comp:Object.keys(t).length>0&&(e.layout=t)}if(e.type==="object"){if(e.properties)for(const t of Object.keys(e.properties))f(e.properties[t]);if(e.allOf)for(const t of e.allOf)f(t);if(e.oneOf)for(const t of e.oneOf)f(t);if(e.anyOf)for(const t of e.anyOf)f(t)}if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const t of e.items)f(t);else f(e.items)};function ae(e,l,t="en"){let n=l;if(!n){const d={strict:!1,allErrors:!0},r=new le(d);M.default(r),n=r}const s=K(e);return s.$id=s.$id??"_jl",P(s,n,t),f(s),s}const oe={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }})
  </template>`},ie={components:{Vjsf:q},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"default",initialValidation:"withData",validateOn:"input",locale:"en"},filledOptions:null,wrapperWidth:100,slotCodes:oe,valid:null}),computed:{tabs(){var l;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(l=this.example.codeSlots)!=null&&l.length&&e.push({value:"slots",title:"Slots"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?ae(this.example.schema):this.example.schema},changeOption(e){return l=>{this.options={...this.options,[e]:l}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.data=e.data,this.display=e.display,this.filledOptions=e.options},editExample(){localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:this.options,data:this.data})),this.$router.push("/editor")}}},se={key:0,class:"text-caption ml-2"},ne=m("div",{class:"text-subtitle"}," Options filled with default values: ",-1),de=["value","onInput"];function re(e,l,t,n,s,d){const r=W,b=D("vjsf"),V=te;return p(),y(G,{class:"my-6",border:"",rounded:"",color:"transparent"},{default:i(()=>[o(Q,{density:"compact"},{default:i(()=>[(p(!0),v(S,null,_(d.tabs,a=>(p(),y(k,{key:a.value,class:"text-none font-weight-bold",size:"small",variant:"text",active:e.tab===a.value,onClick:w=>e.tab=e.tab===a.value?null:a.value},{default:i(()=>[g(u(a.title),1)]),_:2},1032,["active","onClick"]))),128)),o(C),o(k,{color:"primary",icon:"mdi-pencil",onClick:d.editExample},null,8,["onClick"])]),_:1}),o(O),e.tab?(p(),y(z,{key:0,modelValue:e.tab,"onUpdate:modelValue":l[7]||(l[7]=a=>e.tab=a),style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[o(c,{value:"schemaV2",class:"ma-3"},{default:i(()=>[o(r,null,{default:i(()=>[m("pre",null,u(JSON.stringify(t.example.schema,null,2)),1)]),_:1})]),_:1}),o(c,{value:"schema",class:"ma-3"},{default:i(()=>[o(r,null,{default:i(()=>[m("pre",null,u(JSON.stringify(d.schema,null,2)),1)]),_:1})]),_:1}),o(c,{value:"model",class:"ma-3 fill-height"},{default:i(()=>[e.data!==null&&e.data!==void 0?(p(),y(r,{key:0},{default:i(()=>[m("pre",null,u(JSON.stringify(e.data,null,2)),1)]),_:1})):h("",!0)]),_:1}),o(c,{value:"slots",class:"ma-3"},{default:i(()=>[(p(!0),v(S,null,_(t.example.codeSlots,a=>(p(),y(r,{key:a},{default:i(()=>[m("pre",null,u(e.slotCodes[a]),1)]),_:2},1024))),128))]),_:1}),o(c,{value:"options",class:"ma-3",style:{height:"400px"}},{default:i(()=>[o(j,{style:{height:"400px"}},{default:i(()=>[o($,null,{default:i(()=>[o(T,{modelValue:e.options.readOnly,"onUpdate:modelValue":l[0]||(l[0]=a=>e.options.readOnly=a),label:"readOnly",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),o(T,{modelValue:e.options.summary,"onUpdate:modelValue":l[1]||(l[1]=a=>e.options.summary=a),label:"summary",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),o(x,{modelValue:e.options.density,"onUpdate:modelValue":l[2]||(l[2]=a=>e.options.density=a),density:"compact","hide-details":"",label:"density",style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),o(x,{modelValue:e.options.initialValidation,"onUpdate:modelValue":l[3]||(l[3]=a=>e.options.initialValidation=a),density:"compact","hide-details":"",label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),o(x,{modelValue:e.options.validateOn,"onUpdate:modelValue":l[4]||(l[4]=a=>e.options.validateOn=a),density:"compact","hide-details":"",label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),o(x,{modelValue:e.options.locale,"onUpdate:modelValue":l[5]||(l[5]=a=>e.options.locale=a),density:"compact","hide-details":"",label:"locale",style:{"max-width":"300px"},items:["en","fr"]},null,8,["modelValue"]),o(R,{modelValue:e.wrapperWidth,"onUpdate:modelValue":l[6]||(l[6]=a=>e.wrapperWidth=a),min:0,max:100,step:1,color:"primary",label:"container width",style:{"max-width":"500px"},"hide-details":"",density:"compact"},{append:i(()=>[g(u(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"]),e.display?(p(),v("div",se," width="+u(e.display.width)+"px, display="+u(e.display.name),1)):h("",!0)]),_:1}),o(O,{vertical:""}),o($,{style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[ne,o(r,null,{default:i(()=>[m("pre",null,u(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):h("",!0),o(O),o(X,{fluid:""},{default:i(()=>[o(V,{fallback:"loading..."},{default:i(()=>[m("div",{style:J(`width: ${e.wrapperWidth}%`)},[o(H,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":l[9]||(l[9]=a=>e.valid=a)},{default:i(()=>[L(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:d.updateState},()=>[o(b,{"model-value":e.data,schema:d.schema,options:e.options,"onUpdate:state":d.updateState},{"custom-textarea":i(({node:a,statefulLayout:w})=>[m("textarea",{value:a.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:U=>w.input(a,U.target.value)},null,40,de)]),"custom-message":i(({node:a})=>[g(" This message is defined in a slot (key="+u(a.key)+") ",1)]),_:1},8,["model-value","schema","options","onUpdate:state"])]),o(j,null,{default:i(()=>[o(C),o(k,{color:d.validateColor,flat:"",class:"ma-2",onClick:l[8]||(l[8]=a=>e.$refs.form.validate())},{default:i(()=>[g(" Validate ")]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3})]),_:3})}const Ve=I(ie,[["render",re]]);export{ve as _,Ve as a};
