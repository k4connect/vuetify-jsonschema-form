import{_ as N,t as y,v as M,N as F,O as H,Q as R,J as W,I as K,z as l,d as G,r as Q,c as h,g as w,o as X,R as Y,S as D,T as Z,U as ee,i as u,F as _,A as i,K as L,L as I,B as C,y as p,x as b,H as S,M as te,V as oe}from"./entry.E_THYB_P.js";import{_ as ae}from"./code-block.CE4ZavV7.js";import{g as le,a as re,V as ie,b as ne,c as se,d as de,r as ue,e as me,i as fe,_ as ce,f as pe,h as ve,j as ye,k as be,l as Ve,m as ge,n as ke,o as we,p as xe,q as _e}from"./vjsf.G6fwrY-_.js";import{m as je}from"./markdown.vue.Dxm4EC6p.js";import{V as Oe}from"./index.DDwLteo_.js";import{m as he,a as Ce,u as Me}from"./tag.BJkGyqEK.js";import{m as $e,u as Se,V as Te}from"./index.BLdtcYYj.js";import{m as De,I as Le,M as Ie,d as Ne}from"./VList.pUBYJ4iv.js";import{V as Ee}from"./VContainer.BX2El1jf.js";import{V as Pe}from"./VSpacer.Mmtnf2oe.js";import{V as Ue}from"./VBtn.DjO8hhNc.js";const ze={props:{content:{type:String,required:!0}}},Ae=["innerHTML"];function qe(e,o,t,f,d,c){return y(),M("div",{class:"markdown-block",innerHTML:e.$markdown(t.content)},null,8,Ae)}const mt=N(ze,[["render",qe]]),Be=F({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...he(),...$e(),...Ce(),...De({transition:"fade-transition"})},"VLazy"),Je=H()({name:"VLazy",directives:{intersect:Le},props:Be(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:t}=o;const{dimensionStyles:f}=Se(e),d=R(e,"modelValue");function c(m){d.value||(d.value=m)}return Me(()=>W(l(e.tag,{class:["v-lazy",e.class],style:[f.value,e.style]},{default:()=>[d.value&&l(Ie,{transition:e.transition,appear:!0},{default:()=>{var m;return[(m=t.default)==null?void 0:m.call(t)]}})]}),[[K("intersect"),{handler:c,options:e.options},null]])),{}}}),Fe=G({props:{modelValue:{type:Object,required:!0},statefulLayout:{type:Object,required:!0}},setup(e,{expose:o}){const t=Q(null),f=h(()=>e.modelValue.data&&je.parse(e.modelValue.data)),d=h(()=>le(e.modelValue,e.statefulLayout)),c=h(()=>{const n=re(e.modelValue,e.statefulLayout);return n.default=()=>{const r=[w(ie,{text:d.value.label}),w("textarea",{ref:t})];return e.modelValue.options.summary&&r.push(w("div",{innerHTML:f.value})),w("div",{class:"vjsf-node-markdown-content"},r)},n});let m=null,s=null;const j=async()=>{if(e.modelValue.options.readOnly)return;if(!t.value)throw new Error("component was not mounted for markdown editor");const n=(await ee(()=>import("./easymde.BABgbMA6.js").then(O=>O.e),__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,r=e.modelValue.messages,v=e.modelValue.options.plugins.markdown;console.log("PLUGIN OPTS",v);const $={element:t.value,initialValue:e.modelValue.data??"",renderingConfig:{},status:!1,autoDownloadFontAwesome:!1,spellChecker:!1,minHeight:"300px",insertTexts:{link:[r.mdeLink1,r.mdeLink2],image:[r.mdeImg1,r.mdeImg2],table:[r.mdeTable1,r.mdeTable2],horizontalRule:["",`

-----

`]},toolbar:[{name:"bold",action:n.toggleBold,className:"mdi mdi-format-bold",title:r.bold},{name:"italic",action:n.toggleItalic,className:"mdi mdi-format-italic",title:r.italic},{name:"heading",action:n.toggleHeadingSmaller,className:"mdi mdi-format-title",title:r.heading},"|",{name:"quote",action:n.toggleBlockquote,className:"mdi mdi-format-quote-open",title:r.quote},{name:"unordered-list",action:n.toggleUnorderedList,className:"mdi mdi-format-list-bulleted",title:r.unorderedList},{name:"ordered-list",action:n.toggleOrderedList,className:"mdi mdi-format-list-numbered",title:r.orderedList},"|",{name:"link",action:n.drawLink,className:"mdi mdi-link",title:r.createLink},{name:"image",action:n.drawImage,className:"mdi mdi-image",title:r.insertImage},{name:"table",action:n.drawTable,className:"mdi mdi-table",title:r.createTable},"|",{name:"preview",action:n.togglePreview,className:"mdi mdi-eye text-accent",title:r.preview,noDisable:!0},"|",{name:"undo",action:n.undo,className:"mdi mdi-undo",title:r.undo,noDisable:!0},{name:"redo",action:n.redo,className:"mdi mdi-redo",title:r.redo,noDisable:!0},"|",{name:"guide",action:"https://simplemde.com/markdown-guide",className:"mdi mdi-help-circle text-success",title:r.mdeGuide,noDisable:!0}],...v==null?void 0:v.easyMDEOptions};s&&s.toTextArea(),s=new n($);let k=!1;s.codemirror.on("change",()=>{k=!0,s&&e.statefulLayout.input(e.modelValue,s.value())}),s.codemirror.on("blur",()=>{m=setTimeout(()=>{k&&e.statefulLayout.blur(e.modelValue),k=!1},500)}),s.codemirror.on("focus",()=>{m&&clearTimeout(m)}),e.modelValue.autofocus&&s.codemirror.focus()};X(j),Y(()=>{s&&s.toTextArea()}),D(()=>e.modelValue,()=>{s&&s.value()!==e.modelValue.data&&s.value(e.modelValue.data??"")}),D(()=>[e.modelValue.options.readOnly,e.modelValue.messages,e.modelValue.options.easyMDEOptions],(n,r)=>{(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2])&&j()}),e.statefulLayout.events.on("autofocus",()=>{console.log("focus code mirror ?"),e.modelValue.autofocus&&s&&s.codemirror.focus()});const x=Z(),V=h(()=>He(x));return()=>[w("style",{innerHTML:V.value}),w(ne,d.value,c.value)]}}),He=e=>`
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .CodeMirror {
    color: white;
    border-color: ${e.current.value.variables["border-color"]};
    background-color: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .cm-s-easymde .CodeMirror-cursor {
    border-color: white;
}
.vjsf-node-markdown.vjsf-dark .CodeMirror-cursor {
    border-left:1px solid white;
    border-right:none;width:0;
}
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .editor-toolbar > * {
    border-color: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .editor-toolbar {
    border-top: 1px solid ${e.current.value.variables["border-color"]};
    border-left: 1px solid ${e.current.value.variables["border-color"]};
    border-right: 1px solid ${e.current.value.variables["border-color"]};
}
.vjsf-node-markdown.vjsf-dark .editor-toolbar i.separator {
    border-left: 1px solid ${e.current.value.variables["border-color"]};
    border-right: 1px solid ${e.current.value.variables["border-color"]};
}
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .editor-toolbar > .active, .editor-toolbar > button:hover, .editor-preview pre, .cm-s-easymde .cm-comment {
    background-color: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .CodeMirror-fullscreen {
    background: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .editor-toolbar.fullscreen {
    background: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .editor-preview {
    background: ${e.current.value.colors.surface};
}
.vjsf-node-markdown.vjsf-dark .editor-preview-side {
    border-color: ${e.current.value.variables["border-color"]};
}
.vjsf-node-markdown.vjsf-dark .CodeMirror-selected {
    background: ${e.current.value.colors.secondary};
}
.vjsf-node-markdown.vjsf-dark .CodeMirror-focused .CodeMirror-selected {
    background: ${e.current.value.colors.secondary};
}
.vjsf-node-markdown.vjsf-dark .CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection {
    background:${e.current.value.colors.secondary}
}
.vjsf-node-markdown.vjsf-dark .CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection {
    background:${e.current.value.colors.secondary}
}
.vjsf-node-markdown.vjsf-dark .EasyMDEContainer .CodeMirror-focused .CodeMirror-selected {
    background: ${e.current.value.colors.secondary}
}
  `,Re=me,g=e=>{var o;if(!e.layout){const t={};if((e.separator||e["x-separator"])&&(t.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||(o=e.items)!=null&&o.enum)&&(t.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]&&(t.comp=e["x-display"],delete e["x-display"]),e.format==="hexcolor"&&(t.comp="color-picker",delete e.format),e["x-props"]&&(t.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(t.comp="select",t.getItems={expr:e["x-fromData"]},delete e["x-fromData"]),e["x-fromUrl"]){let f=e["x-fromUrl"];for(const d of f.matchAll(/\{(.*?)\}/g))d[1]!=="q"&&(f=f.replace(d[0],"$"+d[0]));t.getItems={url:f},delete e["x-fromUrl"]}t.getItems&&fe(t.getItems)&&(e["x-itemKey"]&&(t.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(t.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(t.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(t.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(t.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),Object.keys(t).length===1&&"comp"in t?e.layout=t.comp:Object.keys(t).length>0&&(e.layout=t)}if(e.type==="object"){if(e.properties)for(const t of Object.keys(e.properties))g(e.properties[t]);if(e.allOf)for(const t of e.allOf)g(t);if(e.oneOf)for(const t of e.oneOf)g(t);if(e.anyOf)for(const t of e.anyOf)g(t)}if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const t of e.items)g(t);else g(e.items)};function We(e,o,t="en"){let f=o;if(!f){const c={strict:!1,allErrors:!0},m=new Re(c);se.default(m),f=m}const d=de(e);return d.$id=d.$id??"_jl",ue(d,f,t),g(d),d}const Ke={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }})
  </template>`},Ge={components:{Vjsf:ce,VContainer:Ee,VRow:pe,VCol:ve,VSpacer:Pe,VForm:ye,VBtn:Ue,VDivider:Ne,VSelect:be,VSwitch:Ve,VToolbar:Oe,VSheet:ge,VWindow:ke,VSlider:we,VWindowItem:xe,VLazy:Je,VDefaultsProvider:Te,VTextField:_e},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"default",initialValidation:"withData",validateOn:"input",updateOn:"input",locale:"en",plugins:[Fe]},filledOptions:null,wrapperWidth:100,slotCodes:Ke,valid:null}),computed:{tabs(){var o;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(o=this.example.codeSlots)!=null&&o.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?We(this.example.schema):this.example.schema},changeOption(e){return o=>{this.options={...this.options,[e]:o}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions=e.options},editExample(){localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:this.options,data:this.data})),this.$router.push("/editor")}}},Qe={key:0,class:"text-caption ml-2"},Xe=b("div",{class:"text-subtitle"}," Options filled with default values: ",-1),Ye=["value","onInput"];function Ze(e,o,t,f,d,c){const m=u("v-btn"),s=u("v-spacer"),j=u("v-toolbar"),x=u("v-divider"),V=ae,n=u("v-window-item"),r=u("v-switch"),v=u("v-select"),$=u("v-slider"),k=u("v-col"),O=u("v-row"),E=u("v-window"),P=u("vjsf"),U=u("v-defaults-provider"),z=u("v-form"),A=u("v-lazy"),q=u("v-container"),B=u("v-sheet");return y(),_(B,{class:"my-6",border:"",rounded:"",color:"transparent"},{default:i(()=>[l(j,{density:"compact"},{default:i(()=>[(y(!0),M(L,null,I(c.tabs,a=>(y(),_(m,{key:a.value,class:"text-none font-weight-bold",size:"small",variant:"text",active:e.tab===a.value,onClick:T=>e.tab=e.tab===a.value?null:a.value},{default:i(()=>[C(p(a.title),1)]),_:2},1032,["active","onClick"]))),128)),l(s),l(m,{color:"primary",icon:"mdi-pencil",onClick:c.editExample},null,8,["onClick"])]),_:1}),l(x),e.tab?(y(),_(E,{key:0,modelValue:e.tab,"onUpdate:modelValue":o[8]||(o[8]=a=>e.tab=a),style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[l(n,{value:"schemaV2",class:"ma-3"},{default:i(()=>[l(V,null,{default:i(()=>[b("pre",null,p(JSON.stringify(t.example.schema,null,2)),1)]),_:1})]),_:1}),l(n,{value:"schema",class:"ma-3"},{default:i(()=>[l(V,null,{default:i(()=>[b("pre",null,p(JSON.stringify(c.schema,null,2)),1)]),_:1})]),_:1}),l(n,{value:"model",class:"ma-3 fill-height"},{default:i(()=>[e.data!==null&&e.data!==void 0?(y(),_(V,{key:0},{default:i(()=>[b("pre",null,p(JSON.stringify(e.data,null,2)),1)]),_:1})):S("",!0)]),_:1}),l(n,{value:"slots",class:"ma-3"},{default:i(()=>[(y(!0),M(L,null,I(t.example.codeSlots,a=>(y(),_(V,{key:a},{default:i(()=>[b("pre",null,p(e.slotCodes[a]),1)]),_:2},1024))),128))]),_:1}),l(n,{value:"defaultProps",class:"ma-3"},{default:i(()=>[l(V,null,{default:i(()=>[b("pre",null,p(JSON.stringify(t.example.defaultProps,null,2)),1)]),_:1})]),_:1}),l(n,{value:"options",class:"ma-3",style:{height:"400px"}},{default:i(()=>[l(O,{style:{height:"400px"}},{default:i(()=>[l(k,null,{default:i(()=>[l(r,{modelValue:e.options.readOnly,"onUpdate:modelValue":o[0]||(o[0]=a=>e.options.readOnly=a),label:"readOnly",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),l(r,{modelValue:e.options.summary,"onUpdate:modelValue":o[1]||(o[1]=a=>e.options.summary=a),label:"summary",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),l(v,{modelValue:e.options.density,"onUpdate:modelValue":o[2]||(o[2]=a=>e.options.density=a),density:"compact","hide-details":"",label:"density",style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),l(v,{modelValue:e.options.initialValidation,"onUpdate:modelValue":o[3]||(o[3]=a=>e.options.initialValidation=a),density:"compact","hide-details":"",label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),l(v,{modelValue:e.options.validateOn,"onUpdate:modelValue":o[4]||(o[4]=a=>e.options.validateOn=a),density:"compact","hide-details":"",label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),l(v,{modelValue:e.options.updateOn,"onUpdate:modelValue":o[5]||(o[5]=a=>e.options.updateOn=a),density:"compact","hide-details":"",label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),l(v,{modelValue:e.options.locale,"onUpdate:modelValue":o[6]||(o[6]=a=>e.options.locale=a),density:"compact","hide-details":"",label:"locale",style:{"max-width":"300px"},items:["en","fr"]},null,8,["modelValue"]),l($,{modelValue:e.wrapperWidth,"onUpdate:modelValue":o[7]||(o[7]=a=>e.wrapperWidth=a),min:0,max:100,step:1,color:"primary",label:"container width",style:{"max-width":"500px"},"hide-details":"",density:"compact"},{append:i(()=>[C(p(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"]),e.display?(y(),M("div",Qe," width="+p(e.display.width)+"px, display="+p(e.display.name),1)):S("",!0)]),_:1}),l(x,{vertical:""}),l(k,{style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[Xe,l(V,null,{default:i(()=>[b("pre",null,p(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):S("",!0),l(x),l(q,{fluid:""},{default:i(()=>[l(A,{"min-height":120},{default:i(()=>[b("div",{style:te(`width: ${e.wrapperWidth}%`)},[l(z,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":o[11]||(o[11]=a=>e.valid=a)},{default:i(()=>[l(U,{defaults:t.example.defaultProps||{}},{default:i(()=>[oe(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:c.updateState,updateModelValue:a=>e.data=a},()=>[l(P,{modelValue:e.data,"onUpdate:modelValue":o[9]||(o[9]=a=>e.data=a),schema:c.schema,options:e.options,"onUpdate:state":c.updateState},{"custom-textarea":i(({node:a,statefulLayout:T})=>[b("textarea",{value:a.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:J=>T.input(a,J.target.value)},null,40,Ye)]),"custom-message":i(({node:a})=>[C(" This message is defined in a slot (key="+p(a.key)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),l(O,{class:"ma-0"},{default:i(()=>[l(s),l(m,{color:c.validateColor,flat:"",class:"ma-2",onClick:o[10]||(o[10]=a=>e.$refs.form.validate())},{default:i(()=>[C(" Validate ")]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3})]),_:3})}const ft=N(Ge,[["render",Ze]]);export{mt as _,ft as a};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./easymde.BABgbMA6.js","./entry.E_THYB_P.js","./entry.BgJP_RUx.css","./markdown.vue.Dxm4EC6p.js","./markdown.DedfkLR9.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
