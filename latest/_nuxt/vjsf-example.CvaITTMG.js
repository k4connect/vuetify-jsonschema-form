import{_ as C,t as m,v as g,N as B,O as F,Q as W,J as K,I as R,z as l,i as s,F as V,A as i,K as I,L as T,B as x,y as p,x as f,H as w,M as E,R as q}from"./entry.DTIvWivT.js";import{_ as H}from"./code-block.CV8on2GT.js";import{a as G,c as Q,r as X,b as Y,i as Z,_ as ee,V as te,d as le,e as ae,f as oe,g as ie,h as se,j as ne,k as de,l as re,m as ue}from"./index.CGpMKhBv.js";import{V as pe}from"./index.DePuyH86.js";import{m as me,a as fe,u as ve}from"./tag.CG-DjV1o.js";import{m as ce,u as ye,V as Ve}from"./index.CXbSpQjk.js";import{m as _e,I as xe,M as ge,d as he}from"./VList.Cflr0k1r.js";import{V as we}from"./VContainer.D2yxw9E8.js";import{V as be}from"./VSpacer.Bh7leN4z.js";import{V as Oe}from"./VBtn._4JRzG-w.js";const ke={props:{content:{type:String,required:!0}}},Se=["innerHTML"];function je(e,a,t,d,n,r){return m(),g("div",{class:"markdown-block",innerHTML:e.$markdown(t.content)},null,8,Se)}const He=C(ke,[["render",je]]),Ie=B({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...me(),...ce(),...fe(),..._e({transition:"fade-transition"})},"VLazy"),Te=F()({name:"VLazy",directives:{intersect:xe},props:Ie(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const{dimensionStyles:d}=ye(e),n=W(e,"modelValue");function r(u){n.value||(n.value=u)}return ve(()=>K(l(e.tag,{class:["v-lazy",e.class],style:[d.value,e.style]},{default:()=>[n.value&&l(ge,{transition:e.transition,appear:!0},{default:()=>{var u;return[(u=t.default)==null?void 0:u.call(t)]}})]}),[[R("intersect"),{handler:r,options:e.options},null]])),{}}}),Ce=Y,v=e=>{var a;if(!e.layout){const t={};if(e["x-display"]==="icon"&&(e.enum||(a=e.items)!=null&&a.enum)&&(t.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]&&(t.comp=e["x-display"],delete e["x-display"]),e.format==="hexcolor"&&(t.comp="color-picker",delete e.format),e["x-props"]&&(t.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(t.comp="select",t.getItems={expr:e["x-fromData"]},delete e["x-fromData"]),e["x-fromUrl"]){let d=e["x-fromUrl"];for(const n of d.matchAll(/\{(.*?)\}/g))n[1]!=="q"&&(d=d.replace(n[0],"$"+n[0]));t.getItems={url:d},delete e["x-fromUrl"]}t.getItems&&Z(t.getItems)&&(e["x-itemKey"]&&(t.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(t.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(t.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(t.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(t.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),Object.keys(t).length===1&&"comp"in t?e.layout=t.comp:Object.keys(t).length>0&&(e.layout=t)}if(e.type==="object"){if(e.properties)for(const t of Object.keys(e.properties))v(e.properties[t]);if(e.allOf)for(const t of e.allOf)v(t);if(e.oneOf)for(const t of e.oneOf)v(t);if(e.anyOf)for(const t of e.anyOf)v(t)}if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const t of e.items)v(t);else v(e.items)};function Pe(e,a,t="en"){let d=a;if(!d){const r={strict:!1,allErrors:!0},u=new Ce(r);G.default(u),d=u}const n=Q(e);return n.$id=n.$id??"_jl",X(n,d,t),v(n),n}const $e={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }})
  </template>`},De={components:{Vjsf:ee,VContainer:we,VRow:te,VCol:le,VSpacer:be,VForm:ae,VBtn:Oe,VDivider:he,VSelect:oe,VSwitch:ie,VToolbar:pe,VSheet:se,VWindow:ne,VSlider:de,VWindowItem:re,VLazy:Te,VDefaultsProvider:Ve,VTextField:ue},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"default",initialValidation:"withData",validateOn:"input",locale:"en"},filledOptions:null,wrapperWidth:100,slotCodes:$e,valid:null}),computed:{tabs(){var a;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(a=this.example.codeSlots)!=null&&a.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?Pe(this.example.schema):this.example.schema},changeOption(e){return a=>{this.options={...this.options,[e]:a}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.data=e.data,this.display=e.display,this.filledOptions=e.options},editExample(){localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:this.options,data:this.data})),this.$router.push("/editor")}}},Ue={key:0,class:"text-caption ml-2"},Ne=f("div",{class:"text-subtitle"}," Options filled with default values: ",-1),Le=["value","onInput"];function ze(e,a,t,d,n,r){const u=s("v-btn"),b=s("v-spacer"),P=s("v-toolbar"),h=s("v-divider"),c=H,y=s("v-window-item"),O=s("v-switch"),_=s("v-select"),$=s("v-slider"),k=s("v-col"),S=s("v-row"),D=s("v-window"),U=s("vjsf"),N=s("v-defaults-provider"),L=s("v-form"),z=s("v-lazy"),A=s("v-container"),J=s("v-sheet");return m(),V(J,{class:"my-6",border:"",rounded:"",color:"transparent"},{default:i(()=>[l(P,{density:"compact"},{default:i(()=>[(m(!0),g(I,null,T(r.tabs,o=>(m(),V(u,{key:o.value,class:"text-none font-weight-bold",size:"small",variant:"text",active:e.tab===o.value,onClick:j=>e.tab=e.tab===o.value?null:o.value},{default:i(()=>[x(p(o.title),1)]),_:2},1032,["active","onClick"]))),128)),l(b),l(u,{color:"primary",icon:"mdi-pencil",onClick:r.editExample},null,8,["onClick"])]),_:1}),l(h),e.tab?(m(),V(D,{key:0,modelValue:e.tab,"onUpdate:modelValue":a[7]||(a[7]=o=>e.tab=o),style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[l(y,{value:"schemaV2",class:"ma-3"},{default:i(()=>[l(c,null,{default:i(()=>[f("pre",null,p(JSON.stringify(t.example.schema,null,2)),1)]),_:1})]),_:1}),l(y,{value:"schema",class:"ma-3"},{default:i(()=>[l(c,null,{default:i(()=>[f("pre",null,p(JSON.stringify(r.schema,null,2)),1)]),_:1})]),_:1}),l(y,{value:"model",class:"ma-3 fill-height"},{default:i(()=>[e.data!==null&&e.data!==void 0?(m(),V(c,{key:0},{default:i(()=>[f("pre",null,p(JSON.stringify(e.data,null,2)),1)]),_:1})):w("",!0)]),_:1}),l(y,{value:"slots",class:"ma-3"},{default:i(()=>[(m(!0),g(I,null,T(t.example.codeSlots,o=>(m(),V(c,{key:o},{default:i(()=>[f("pre",null,p(e.slotCodes[o]),1)]),_:2},1024))),128))]),_:1}),l(y,{value:"defaultProps",class:"ma-3"},{default:i(()=>[l(c,null,{default:i(()=>[f("pre",null,p(JSON.stringify(t.example.defaultProps,null,2)),1)]),_:1})]),_:1}),l(y,{value:"options",class:"ma-3",style:{height:"400px"}},{default:i(()=>[l(S,{style:{height:"400px"}},{default:i(()=>[l(k,null,{default:i(()=>[l(O,{modelValue:e.options.readOnly,"onUpdate:modelValue":a[0]||(a[0]=o=>e.options.readOnly=o),label:"readOnly",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),l(O,{modelValue:e.options.summary,"onUpdate:modelValue":a[1]||(a[1]=o=>e.options.summary=o),label:"summary",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),l(_,{modelValue:e.options.density,"onUpdate:modelValue":a[2]||(a[2]=o=>e.options.density=o),density:"compact","hide-details":"",label:"density",style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),l(_,{modelValue:e.options.initialValidation,"onUpdate:modelValue":a[3]||(a[3]=o=>e.options.initialValidation=o),density:"compact","hide-details":"",label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),l(_,{modelValue:e.options.validateOn,"onUpdate:modelValue":a[4]||(a[4]=o=>e.options.validateOn=o),density:"compact","hide-details":"",label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),l(_,{modelValue:e.options.locale,"onUpdate:modelValue":a[5]||(a[5]=o=>e.options.locale=o),density:"compact","hide-details":"",label:"locale",style:{"max-width":"300px"},items:["en","fr"]},null,8,["modelValue"]),l($,{modelValue:e.wrapperWidth,"onUpdate:modelValue":a[6]||(a[6]=o=>e.wrapperWidth=o),min:0,max:100,step:1,color:"primary",label:"container width",style:{"max-width":"500px"},"hide-details":"",density:"compact"},{append:i(()=>[x(p(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"]),e.display?(m(),g("div",Ue," width="+p(e.display.width)+"px, display="+p(e.display.name),1)):w("",!0)]),_:1}),l(h,{vertical:""}),l(k,{style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[Ne,l(c,null,{default:i(()=>[f("pre",null,p(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):w("",!0),l(h),l(A,{fluid:""},{default:i(()=>[l(z,{"min-height":120},{default:i(()=>[f("div",{style:E(`width: ${e.wrapperWidth}%`)},[l(L,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":a[9]||(a[9]=o=>e.valid=o)},{default:i(()=>[l(N,{defaults:t.example.defaultProps||{}},{default:i(()=>[q(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:r.updateState},()=>[l(U,{"model-value":e.data,schema:r.schema,options:e.options,"onUpdate:state":r.updateState},{"custom-textarea":i(({node:o,statefulLayout:j})=>[f("textarea",{value:o.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:M=>j.input(o,M.target.value)},null,40,Le)]),"custom-message":i(({node:o})=>[x(" This message is defined in a slot (key="+p(o.key)+") ",1)]),_:1},8,["model-value","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),l(S,{class:"ma-0"},{default:i(()=>[l(b),l(u,{color:r.validateColor,flat:"",class:"ma-2",onClick:a[8]||(a[8]=o=>e.$refs.form.validate())},{default:i(()=>[x(" Validate ")]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3})]),_:3})}const Ge=C(De,[["render",ze]]);export{He as _,Ge as a};
