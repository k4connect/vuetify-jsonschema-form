import{_ as T,t as m,v as _,N as W,O as q,Q as E,J as F,I as R,z as a,i as r,F as x,A as s,K as D,L as $,B as g,y as p,x as y,H as b,M as H,R as G}from"./entry.jLwDEj1u.js";import{_ as Q}from"./code-block.BlSoVimB.js";import{a as X,c as Y,r as Z,b as ee,i as te,_ as oe,V as le,d as ae,e as ie,f as ne,g as se,h as re,j as de,k as ue,l as pe,m as fe}from"./vjsf.CJwL0P2K.js";import{V as me}from"./index.Cry-wUHG.js";import{V as ye}from"./index.DVARWQGy.js";import{m as ve,a as ce,u as Ve}from"./tag._gGZxpQu.js";import{m as xe,u as ge}from"./dimensions.CQD-n43a.js";import{m as _e,I as Oe,M as be,d as we}from"./VList.BfRQTRn2.js";import{V as ke}from"./index.BodfJFba.js";import{V as je}from"./VContainer.oh9wWzd0.js";import{V as Se}from"./VSpacer.BPxExWBM.js";import{V as he}from"./VBtn.pOcnkB9h.js";const Ie={props:{content:{type:String,required:!0}}},De=["innerHTML"];function $e(e,o,n,u,t,i){return m(),_("div",{class:"markdown-block",innerHTML:e.$markdown(n.content)},null,8,De)}const et=T(Ie,[["render",$e]]),Pe=W({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...ve(),...xe(),...ce(),..._e({transition:"fade-transition"})},"VLazy"),Te=q()({name:"VLazy",directives:{intersect:Oe},props:Pe(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const{dimensionStyles:u}=ge(e),t=E(e,"modelValue");function i(d){t.value||(t.value=d)}return Ve(()=>F(a(e.tag,{class:["v-lazy",e.class],style:[u.value,e.style]},{default:()=>[t.value&&a(be,{transition:e.transition,appear:!0},{default:()=>{var d;return[(d=n.default)==null?void 0:d.call(n)]}})]}),[[R("intersect"),{handler:i,options:e.options},null]])),{}}}),Ce=ee,Ue={modelRoot:"rootData",root:"rootData",model:"data",value:"data"},P=e=>e.match(/^[a-z.]*$/i)&&!["data","context","rootData","parent"].some(o=>e.startsWith(o+"."))?"rootData."+e:e,w=(e,o="js-eval")=>{let n=e,u=!0;n.includes("parent.value")&&(u=!1,n=n.replace(/parent\.value/g,"parent.data"));for(const[t,i]of Object.entries(Ue))n=n.replace(new RegExp(`${t}\\.`,"g"),i+".");if(o==="js-eval"&&(n=P(n)),o==="js-tpl")for(const t of n.matchAll(/\{(.*?)\}/g))t[1]!=="q"&&(n=n.replace(t[0],"${"+P(t[1])+"}"));return n.includes("rootData")&&(u=!1),{type:o,expr:n,pure:u}},f=e=>{var o,n,u;if(!e.layout){const t={};if((e.separator||e["x-separator"])&&(t.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||(o=e.items)!=null&&o.enum)&&(t.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]){let i=e["x-display"];i==="radio"&&(i="radio-group"),i==="checkbox"&&e.type!=="boolean"&&(i="checkbox-group"),i==="switch"&&e.type!=="boolean"&&(i="switch-group"),t.comp=i,delete e["x-display"]}if(e.format==="hexcolor"&&(t.comp="color-picker",delete e.format),e["x-props"]&&(t.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(t.comp=t.comp??"select",t.getItems=w(e["x-fromData"]),delete e["x-fromData"]),e["x-if"]&&(t.if=w(e["x-if"]),delete e["x-if"]),e["x-fromUrl"]){const i=e["x-fromUrl"];t.getItems={url:w(i,"js-tpl")},delete e["x-fromUrl"]}t.getItems&&te(t.getItems)&&(e["x-itemKey"]&&(t.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(t.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(t.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(t.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(t.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),e["x-cols"]&&(t.cols=e["x-cols"]),Object.keys(t).length===1&&"comp"in t?e.layout=t.comp:Object.keys(t).length>0&&(e.layout=t)}if(e.properties)for(const t of Object.keys(e.properties))f(e.properties[t]);if(e.allOf)for(const t of e.allOf)f(t);if(e.oneOf){if(!e.oneOfLayout){const t=Object.keys(((n=e.oneOf[0])==null?void 0:n.properties)||{}).find(i=>{var d;return!!((d=e.oneOf[0])!=null&&d.properties[i].const)});if(t){const i=(u=e.oneOf[0])==null?void 0:u.properties[t];i!=null&&i.title&&(e.oneOfLayout={label:i.title}),e.required&&Array.isArray(e.required)&&(e.required=e.required.filter(d=>d!==t))}}for(const t of e.oneOf)f(t)}if(e.anyOf)for(const t of e.anyOf)f(t);if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const t of e.items)f(t);else f(e.items);if(e.dependencies)for(const t of Object.keys(e.dependencies))f(e.dependencies[t]);e.if&&(e.then&&f(e.then),e.else&&f(e.else))};function Me(e,o,n="en"){let u=o;if(!u){const i={strict:!1,allErrors:!0},d=new Ce(i);X.default(d),u=d}const t=Y(e);return t.$id=t.$id??"_jl",Z(t,u,n),f(t),t}const Le={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }})
  </template>`},Ne={components:{Vjsf:oe,VContainer:je,VRow:le,VCol:ae,VSpacer:Se,VForm:ie,VBtn:he,VDivider:we,VSelect:ne,VSwitch:se,VToolbar:ye,VSheet:re,VWindow:de,VSlider:ue,VWindowItem:pe,VLazy:Te,VDefaultsProvider:ke,VTextField:fe},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"default",titleDepth:4,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",locale:"en",plugins:[me]},filledOptions:null,wrapperWidth:100,slotCodes:Le,valid:null}),computed:{tabs(){var o;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(o=this.example.codeSlots)!=null&&o.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?Me(this.example.schema):this.example.schema},changeOption(e){return o=>{this.options={...this.options,[e]:o}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions=e.options},editExample(){localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:this.options,data:this.data})),this.$router.push("/editor")}}},Ae={key:0,class:"text-caption ml-2"},ze=y("div",{class:"text-subtitle"}," Options filled with default values: ",-1),Je=["value","onInput"];function Be(e,o,n,u,t,i){const d=r("v-btn"),k=r("v-spacer"),C=r("v-toolbar"),O=r("v-divider"),v=Q,c=r("v-window-item"),j=r("v-switch"),V=r("v-select"),U=r("v-slider"),S=r("v-col"),h=r("v-row"),M=r("v-window"),L=r("vjsf"),N=r("v-defaults-provider"),A=r("v-form"),z=r("v-lazy"),J=r("v-container"),B=r("v-sheet");return m(),x(B,{class:"my-6",border:"",rounded:"",color:"transparent"},{default:s(()=>[a(C,{density:"compact"},{default:s(()=>[(m(!0),_(D,null,$(i.tabs,l=>(m(),x(d,{key:l.value,class:"text-none font-weight-bold",size:"small",variant:"text",active:e.tab===l.value,onClick:I=>e.tab=e.tab===l.value?null:l.value},{default:s(()=>[g(p(l.title),1)]),_:2},1032,["active","onClick"]))),128)),a(k),a(d,{color:"primary",icon:"mdi-pencil",onClick:i.editExample},null,8,["onClick"])]),_:1}),a(O),e.tab?(m(),x(M,{key:0,modelValue:e.tab,"onUpdate:modelValue":o[8]||(o[8]=l=>e.tab=l),style:{height:"400px","overflow-y":"auto"}},{default:s(()=>[a(c,{value:"schemaV2",class:"ma-3"},{default:s(()=>[a(v,null,{default:s(()=>[y("pre",null,p(JSON.stringify(n.example.schema,null,2)),1)]),_:1})]),_:1}),a(c,{value:"schema",class:"ma-3"},{default:s(()=>[a(v,null,{default:s(()=>[y("pre",null,p(JSON.stringify(i.schema,null,2)),1)]),_:1})]),_:1}),a(c,{value:"model",class:"ma-3 fill-height"},{default:s(()=>[e.data!==null&&e.data!==void 0?(m(),x(v,{key:0},{default:s(()=>[y("pre",null,p(JSON.stringify(e.data,null,2)),1)]),_:1})):b("",!0)]),_:1}),a(c,{value:"slots",class:"ma-3"},{default:s(()=>[(m(!0),_(D,null,$(n.example.codeSlots,l=>(m(),x(v,{key:l},{default:s(()=>[y("pre",null,p(e.slotCodes[l]),1)]),_:2},1024))),128))]),_:1}),a(c,{value:"defaultProps",class:"ma-3"},{default:s(()=>[a(v,null,{default:s(()=>[y("pre",null,p(JSON.stringify(n.example.defaultProps,null,2)),1)]),_:1})]),_:1}),a(c,{value:"options",class:"ma-3",style:{height:"400px"}},{default:s(()=>[a(h,{style:{height:"400px"}},{default:s(()=>[a(S,null,{default:s(()=>[a(j,{modelValue:e.options.readOnly,"onUpdate:modelValue":o[0]||(o[0]=l=>e.options.readOnly=l),label:"readOnly",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),a(j,{modelValue:e.options.summary,"onUpdate:modelValue":o[1]||(o[1]=l=>e.options.summary=l),label:"summary",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),a(V,{modelValue:e.options.density,"onUpdate:modelValue":o[2]||(o[2]=l=>e.options.density=l),density:"compact","hide-details":"",label:"density",style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),a(V,{modelValue:e.options.initialValidation,"onUpdate:modelValue":o[3]||(o[3]=l=>e.options.initialValidation=l),density:"compact","hide-details":"",label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),a(V,{modelValue:e.options.validateOn,"onUpdate:modelValue":o[4]||(o[4]=l=>e.options.validateOn=l),density:"compact","hide-details":"",label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),a(V,{modelValue:e.options.updateOn,"onUpdate:modelValue":o[5]||(o[5]=l=>e.options.updateOn=l),density:"compact","hide-details":"",label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),a(V,{modelValue:e.options.locale,"onUpdate:modelValue":o[6]||(o[6]=l=>e.options.locale=l),density:"compact","hide-details":"",label:"locale",style:{"max-width":"300px"},items:["en","fr"]},null,8,["modelValue"]),a(U,{modelValue:e.wrapperWidth,"onUpdate:modelValue":o[7]||(o[7]=l=>e.wrapperWidth=l),min:0,max:100,step:1,color:"primary",label:"container width",style:{"max-width":"500px"},"hide-details":"",density:"compact"},{append:s(()=>[g(p(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"]),e.display?(m(),_("div",Ae," width="+p(e.display.width)+"px, display="+p(e.display.name),1)):b("",!0)]),_:1}),a(O,{vertical:""}),a(S,{style:{height:"400px","overflow-y":"auto"}},{default:s(()=>[ze,a(v,null,{default:s(()=>[y("pre",null,p(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):b("",!0),a(O),a(J,{fluid:""},{default:s(()=>[a(z,{"min-height":120},{default:s(()=>[y("div",{style:H(`width: ${e.wrapperWidth}%`)},[a(A,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":o[11]||(o[11]=l=>e.valid=l)},{default:s(()=>[a(N,{defaults:n.example.defaultProps||{}},{default:s(()=>[G(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:i.updateState,updateModelValue:l=>e.data=l},()=>[a(L,{modelValue:e.data,"onUpdate:modelValue":o[9]||(o[9]=l=>e.data=l),schema:i.schema,options:e.options,"onUpdate:state":i.updateState},{"custom-textarea":s(({node:l,statefulLayout:I})=>[y("textarea",{value:l.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:K=>I.input(l,K.target.value)},null,40,Je)]),"custom-message":s(({node:l})=>[g(" This message is defined in a slot (key="+p(l.key)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),a(h,{class:"ma-0"},{default:s(()=>[a(k),a(d,{color:i.validateColor,flat:"",class:"ma-2",onClick:o[10]||(o[10]=l=>e.$refs.form.validate())},{default:s(()=>[g(" Validate ")]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3})]),_:3})}const tt=T(Ne,[["render",Be]]);export{et as _,tt as a};
