import{_ as D,t as m,v as g,N as q,O as F,Q as K,J as W,I as E,z as o,i as d,F as x,A as i,K as I,L as T,B as _,y as u,x as f,H as w,M as R,R as H}from"./entry.B4Fd94br.js";import{_ as G}from"./code-block.DrdlfClj.js";import{a as Q,c as X,r as Y,b as Z,i as ee,_ as te,V as le,d as ae,e as oe,f as ie,g as se,h as ne,j as re,k as de,l as ue,m as pe}from"./vjsf.BYq3YLl1.js";import{V as me}from"./index.DQUXTbX0.js";import{V as fe}from"./index.do_WHCP3.js";import{m as ve,a as ye,u as ce}from"./tag.CN2ZPM_r.js";import{m as Ve,u as xe,V as _e}from"./index.CS3_eLX8.js";import{m as ge,I as Oe,M as we,d as be}from"./VList.DpYT_tCT.js";import{V as ke}from"./VContainer.C0dJqCzM.js";import{V as Se}from"./VSpacer.DeH76dlD.js";import{V as he}from"./VBtn.Cxp3nNIH.js";const je={props:{content:{type:String,required:!0}}},Ie=["innerHTML"];function Te(e,l,r,p,t,s){return m(),g("div",{class:"markdown-block",innerHTML:e.$markdown(r.content)},null,8,Ie)}const Xe=D(je,[["render",Te]]),Ce=q({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...ve(),...Ve(),...ye(),...ge({transition:"fade-transition"})},"VLazy"),De=F()({name:"VLazy",directives:{intersect:Oe},props:Ce(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:r}=l;const{dimensionStyles:p}=xe(e),t=K(e,"modelValue");function s(n){t.value||(t.value=n)}return ce(()=>W(o(e.tag,{class:["v-lazy",e.class],style:[p.value,e.style]},{default:()=>[t.value&&o(we,{transition:e.transition,appear:!0},{default:()=>{var n;return[(n=r.default)==null?void 0:n.call(r)]}})]}),[[E("intersect"),{handler:s,options:e.options},null]])),{}}}),Pe=Z,C=e=>{let l=e,r=!0;return l.includes("rootData")&&(r=!1),l.includes("parent.value")&&(r=!1,l=l.replace(/parent\.value/g,"parentData")),{type:"js-eval",expr:l,pure:r}},v=e=>{var l,r,p;if(!e.layout){const t={};if((e.separator||e["x-separator"])&&(t.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||(l=e.items)!=null&&l.enum)&&(t.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]&&(t.comp=e["x-display"],delete e["x-display"]),e.format==="hexcolor"&&(t.comp="color-picker",delete e.format),e["x-props"]&&(t.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(t.comp="select",t.getItems=C(e["x-fromData"]),delete e["x-fromData"]),e["x-if"]&&(t.if=C(e["x-if"]),delete e["x-if"]),e["x-fromUrl"]){let s=e["x-fromUrl"];for(const n of s.matchAll(/\{(.*?)\}/g))n[1]!=="q"&&(s=s.replace(n[0],"$"+n[0]));t.getItems={url:s},delete e["x-fromUrl"]}t.getItems&&ee(t.getItems)&&(e["x-itemKey"]&&(t.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(t.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(t.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(t.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(t.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),Object.keys(t).length===1&&"comp"in t?e.layout=t.comp:Object.keys(t).length>0&&(e.layout=t)}if(e.properties)for(const t of Object.keys(e.properties))v(e.properties[t]);if(e.allOf)for(const t of e.allOf)v(t);if(e.oneOf){if(!e.oneOfLayout){const t=Object.keys(((r=e.oneOf[0])==null?void 0:r.properties)||{}).find(s=>{var n;return!!((n=e.oneOf[0])!=null&&n.properties[s].const)});if(t){const s=(p=e.oneOf[0])==null?void 0:p.properties[t];s!=null&&s.title&&(e.oneOfLayout={label:s.title}),e.required&&Array.isArray(e.required)&&(e.required=e.required.filter(n=>n!==t))}}for(const t of e.oneOf)v(t)}if(e.anyOf)for(const t of e.anyOf)v(t);if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const t of e.items)v(t);else v(e.items)};function Ue(e,l,r="en"){let p=l;if(!p){const s={strict:!1,allErrors:!0},n=new Pe(s);Q.default(n),p=n}const t=X(e);return t.$id=t.$id??"_jl",Y(t,p,r),v(t),t}const $e={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }})
  </template>`},Le={components:{Vjsf:te,VContainer:ke,VRow:le,VCol:ae,VSpacer:Se,VForm:oe,VBtn:he,VDivider:be,VSelect:ie,VSwitch:se,VToolbar:fe,VSheet:ne,VWindow:re,VSlider:de,VWindowItem:ue,VLazy:De,VDefaultsProvider:_e,VTextField:pe},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"default",initialValidation:"withData",validateOn:"input",updateOn:"input",locale:"en",plugins:[me]},filledOptions:null,wrapperWidth:100,slotCodes:$e,valid:null}),computed:{tabs(){var l;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(l=this.example.codeSlots)!=null&&l.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?Ue(this.example.schema):this.example.schema},changeOption(e){return l=>{this.options={...this.options,[e]:l}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions=e.options},editExample(){localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:this.options,data:this.data})),this.$router.push("/editor")}}},Ne={key:0,class:"text-caption ml-2"},Ae=f("div",{class:"text-subtitle"}," Options filled with default values: ",-1),Me=["value","onInput"];function ze(e,l,r,p,t,s){const n=d("v-btn"),b=d("v-spacer"),P=d("v-toolbar"),O=d("v-divider"),y=G,c=d("v-window-item"),k=d("v-switch"),V=d("v-select"),U=d("v-slider"),S=d("v-col"),h=d("v-row"),$=d("v-window"),L=d("vjsf"),N=d("v-defaults-provider"),A=d("v-form"),M=d("v-lazy"),z=d("v-container"),J=d("v-sheet");return m(),x(J,{class:"my-6",border:"",rounded:"",color:"transparent"},{default:i(()=>[o(P,{density:"compact"},{default:i(()=>[(m(!0),g(I,null,T(s.tabs,a=>(m(),x(n,{key:a.value,class:"text-none font-weight-bold",size:"small",variant:"text",active:e.tab===a.value,onClick:j=>e.tab=e.tab===a.value?null:a.value},{default:i(()=>[_(u(a.title),1)]),_:2},1032,["active","onClick"]))),128)),o(b),o(n,{color:"primary",icon:"mdi-pencil",onClick:s.editExample},null,8,["onClick"])]),_:1}),o(O),e.tab?(m(),x($,{key:0,modelValue:e.tab,"onUpdate:modelValue":l[8]||(l[8]=a=>e.tab=a),style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[o(c,{value:"schemaV2",class:"ma-3"},{default:i(()=>[o(y,null,{default:i(()=>[f("pre",null,u(JSON.stringify(r.example.schema,null,2)),1)]),_:1})]),_:1}),o(c,{value:"schema",class:"ma-3"},{default:i(()=>[o(y,null,{default:i(()=>[f("pre",null,u(JSON.stringify(s.schema,null,2)),1)]),_:1})]),_:1}),o(c,{value:"model",class:"ma-3 fill-height"},{default:i(()=>[e.data!==null&&e.data!==void 0?(m(),x(y,{key:0},{default:i(()=>[f("pre",null,u(JSON.stringify(e.data,null,2)),1)]),_:1})):w("",!0)]),_:1}),o(c,{value:"slots",class:"ma-3"},{default:i(()=>[(m(!0),g(I,null,T(r.example.codeSlots,a=>(m(),x(y,{key:a},{default:i(()=>[f("pre",null,u(e.slotCodes[a]),1)]),_:2},1024))),128))]),_:1}),o(c,{value:"defaultProps",class:"ma-3"},{default:i(()=>[o(y,null,{default:i(()=>[f("pre",null,u(JSON.stringify(r.example.defaultProps,null,2)),1)]),_:1})]),_:1}),o(c,{value:"options",class:"ma-3",style:{height:"400px"}},{default:i(()=>[o(h,{style:{height:"400px"}},{default:i(()=>[o(S,null,{default:i(()=>[o(k,{modelValue:e.options.readOnly,"onUpdate:modelValue":l[0]||(l[0]=a=>e.options.readOnly=a),label:"readOnly",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),o(k,{modelValue:e.options.summary,"onUpdate:modelValue":l[1]||(l[1]=a=>e.options.summary=a),label:"summary",color:"primary","hide-details":"",density:"compact"},null,8,["modelValue"]),o(V,{modelValue:e.options.density,"onUpdate:modelValue":l[2]||(l[2]=a=>e.options.density=a),density:"compact","hide-details":"",label:"density",style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),o(V,{modelValue:e.options.initialValidation,"onUpdate:modelValue":l[3]||(l[3]=a=>e.options.initialValidation=a),density:"compact","hide-details":"",label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),o(V,{modelValue:e.options.validateOn,"onUpdate:modelValue":l[4]||(l[4]=a=>e.options.validateOn=a),density:"compact","hide-details":"",label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),o(V,{modelValue:e.options.updateOn,"onUpdate:modelValue":l[5]||(l[5]=a=>e.options.updateOn=a),density:"compact","hide-details":"",label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),o(V,{modelValue:e.options.locale,"onUpdate:modelValue":l[6]||(l[6]=a=>e.options.locale=a),density:"compact","hide-details":"",label:"locale",style:{"max-width":"300px"},items:["en","fr"]},null,8,["modelValue"]),o(U,{modelValue:e.wrapperWidth,"onUpdate:modelValue":l[7]||(l[7]=a=>e.wrapperWidth=a),min:0,max:100,step:1,color:"primary",label:"container width",style:{"max-width":"500px"},"hide-details":"",density:"compact"},{append:i(()=>[_(u(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"]),e.display?(m(),g("div",Ne," width="+u(e.display.width)+"px, display="+u(e.display.name),1)):w("",!0)]),_:1}),o(O,{vertical:""}),o(S,{style:{height:"400px","overflow-y":"auto"}},{default:i(()=>[Ae,o(y,null,{default:i(()=>[f("pre",null,u(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):w("",!0),o(O),o(z,{fluid:""},{default:i(()=>[o(M,{"min-height":120},{default:i(()=>[f("div",{style:R(`width: ${e.wrapperWidth}%`)},[o(A,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":l[11]||(l[11]=a=>e.valid=a)},{default:i(()=>[o(N,{defaults:r.example.defaultProps||{}},{default:i(()=>[H(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:s.updateState,updateModelValue:a=>e.data=a},()=>[o(L,{modelValue:e.data,"onUpdate:modelValue":l[9]||(l[9]=a=>e.data=a),schema:s.schema,options:e.options,"onUpdate:state":s.updateState},{"custom-textarea":i(({node:a,statefulLayout:j})=>[f("textarea",{value:a.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:B=>j.input(a,B.target.value)},null,40,Me)]),"custom-message":i(({node:a})=>[_(" This message is defined in a slot (key="+u(a.key)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),o(h,{class:"ma-0"},{default:i(()=>[o(b),o(n,{color:s.validateColor,flat:"",class:"ma-2",onClick:l[10]||(l[10]=a=>e.$refs.form.validate())},{default:i(()=>[_(" Validate ")]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3})]),_:3})}const Ye=D(Le,[["render",ze]]);export{Xe as _,Ye as a};
